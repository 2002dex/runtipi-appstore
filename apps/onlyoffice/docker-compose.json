{
  "$schema": "../dynamic-compose-schema.json",
  "services": [
    {
      "name": "onlyoffice",
      "image": "onlyoffice/documentserver-ee:latest",
      "internalPort": 80,
      "isMain": true,
      "addPorts": [
        {
          "containerPort": 80,
          "hostPort": 9980,
          "tcp": true
        }
      ],
      "environment": {
        "JWT_ENABLED": "true",
        "JWT_SECRET": "iBFcoalGWCj30UW2BzLnShsRsRF7zcnJ",
        "TZ": "Asia/Kolkata",
        "ONLYOFFICE_DOMAIN": "${APP_DOMAIN}"
      },
      "volumes": [
        {
            "hostPath": "${APP_DATA_DIR}/data/onlyoffice/documentserver/data",
            "containerPath": "/var/www/onlyoffice/Data"
        },
        {
            "hostPath": "${APP_DATA_DIR}/data/onlyoffice/documentserver/logs",
            "containerPath": "/var/log/onlyoffice"
        },
        {
          "hostPath": "${APP_DATA_DIR}/data/onlyoffice/documentserver/lib",
          "containerPath": "/var/lib/onlyoffice"
        }
      ],
      "extraLabels": {
        "traefik.enable": "true",
        "traefik.http.routers.onlyoffice.rule": "Host(`office.${APP_DOMAIN}`)",
        "traefik.http.routers.onlyoffice.entrypoints": "websecure",
        "traefik.http.routers.onlyoffice.tls.certresolver": "myresolver",
        "traefik.http.services.onlyoffice.loadbalancer.server.port": "80",
        "runtipi.managed": "true"
      }
    }
  ]
}